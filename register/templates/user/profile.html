{% extends 'main/base.html' %}
{% load crispy_forms_tags %}

{% block title %} My Profile {% endblock %}

{% block content %}



<div class="mb-5 container">
    <div class="row text-center">
        <div class="col">
            <img class="mt-4 img profile-pic" src="{{user.profile.image.url}}" alt="profile-pic">
        </div>
        <div class="mt-5 col">
                <p>
                <b> Username: </b>
                <br>
                {{user}}
                </p>
                <p>
                <b> Email: </b>
                <br>
                {{user.email}}
                </p>
                <p>
                <b>  Date Joined: </b>
                <br>
                {{ request.user.date_joined|date:"Y-m-d" }}
                </p>              
        </div>
    </div>
</div>
<hr class="mt-5 mb-5">
<div class="mt-3 container-fluid ">
    <div class="row justify-content-center">
        
        <a href="/mylists/">
            <div class="ml-2 mr-2 jumbotron bg-info text-light" id="j1">
                <div class="container">
                    <h1 class="display-6">Number of Lists</h1>
                    <h1 class="lead text-center display-4">{{lists}}</h1>
                </div>
            </div>
        </a>
        
        <a href="/mylists/">
            <div class="ml-2 mr-2 jumbotron bg-danger text-light" id="j2">
                <div class="container">
                    <h1 class="display-6">Uncompleted Tasks</h1>
                    <h2 class="lead text-center display-4">{{tasks}}</h2>
                </div>
            </div>
        </a>

        <a href="/mylists/">
            <div class="ml-2 mr-2 jumbotron bg-success text-light" id="j3">
                <div class="container">
                    <h1 class="display-6">Completed Tasks</h1>
                    <h2 class="lead text-center display-4">{{completed_tasks}}</h2>
                </div>
            </div>
        </a>
    </div>
</div>
<hr class="mt-4">

<div class="mt-5 container">

    <div class="row justify-content-center">
        <h3>Edit Profile</h3>
    </div>
    
    <div class="mt-5 ml-4 mr-4 row justify-content-center">
        
        <form method="POST" enctype="multipart/form-data"> <!--We need to add the enctype to allow working with images-->
        {% csrf_token %}
        {{u_form|crispy}}
        {{p_form|crispy}}
        
            <div class="mb-5 row justify-content-center">
                <button type="submit" class=" mt-3 btn btn-info"> Update Details </button> <a href="/password-reset/" class="mt-3 ml-2 btn btn-info"> Reset Password </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}